# Facebook Messenger AI Dashboard

ä¸€å€‹è‡ªå‹•åŒ–çš„ Facebook Messenger ç¾¤çµ„è¨Šæ¯è™•ç†ç³»çµ±ï¼ŒåŒ…å«è¨Šæ¯æŠ“å–ã€AI æ‘˜è¦åˆ†é¡ã€æ•¸æ“šå„²å­˜å’Œå„€è¡¨æ¿è¦–è¦ºåŒ–åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

- **æ™ºèƒ½è¨Šæ¯è™•ç†**: è‡ªå‹•ç”Ÿæˆè¨Šæ¯æ‘˜è¦å’Œæ™ºèƒ½åˆ†é¡ (å­¸è¡“è¨è«–ã€æŠ€è¡“è¨è«–ã€å·¥ä½œç›¸é—œç­‰)
- **å®Œæ•´ API æœå‹™**: æä¾› RESTful API é€²è¡Œè¨Šæ¯ç®¡ç†å’Œç¾¤çµ„çµ±è¨ˆ
- **çœŸå¯¦è¨Šæ¯é©—è­‰**: æˆåŠŸè™•ç†ã€Œè¤‡é›œè«–ä¸»é¡Œè®€æ›¸æœƒã€ç¾¤çµ„çš„çœŸå¯¦è¨Šæ¯
- **å¤š AI æœå‹™æ”¯æ´**: æ”¯æ´ OpenAIã€Claudeã€HuggingFace ç­‰å¤šç¨® AI æœå‹™
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**: æ˜“æ–¼æ“´å±•å’Œç¶­è­·çš„æ¶æ§‹
- **Docker å®¹å™¨åŒ–**: æ”¯æ´ Docker éƒ¨ç½²å’Œ n8n å·¥ä½œæµç¨‹æ•´åˆ

## ğŸ“‹ ç³»çµ±æ¶æ§‹

```
Facebook Messenger â†’ API Service â†’ AI Processing â†’ Database â†’ Dashboard
```

### æ ¸å¿ƒæœå‹™

- **Complete Messenger API** (ç«¯å£ 3002) - å®Œæ•´ Messenger åŠŸèƒ½å’Œç¾¤çµ„ç®¡ç†
- **Simple AI Service** (ç«¯å£ 3001) - åŸºæœ¬ AI è™•ç†åŠŸèƒ½
- **Real Message Processor** - çœŸå¯¦è¨Šæ¯è™•ç†å’Œé©—è­‰

## ğŸ› ï¸ å®‰è£èˆ‡è¨­å®š

### 1. ç’°å¢ƒéœ€æ±‚

- Node.js 16+
- npm æˆ– yarn
- Facebook å¸³è™Ÿ
- AI æœå‹™ API é‡‘é‘° (OpenAI, Claude, æˆ– HuggingFace)

### 2. å®‰è£ä¾è³´

```bash
npm install
```

### 3. ç’°å¢ƒè¨­å®š

```bash
cp env.example .env
# ç·¨è¼¯ .env æª”æ¡ˆè¨­å®šæ‚¨çš„ Facebook å¸³è™Ÿå’Œ API é‡‘é‘°
```

### 4. å•Ÿå‹•æœå‹™

```bash
# å•Ÿå‹•å®Œæ•´ Messenger API (æ¨è–¦)
node complete-messenger-api.js

# æˆ–å•Ÿå‹•åŸºæœ¬ AI æœå‹™
node simple-ai-server.js

# æ¸¬è©¦çœŸå¯¦è¨Šæ¯è™•ç†
node real-message-processor.js
```

## ğŸ“š API æ–‡ä»¶

### å¥åº·æª¢æŸ¥

```bash
GET /health
GET /health/detailed
```

### è¨Šæ¯è™•ç†

```bash
POST /api/process-message
Content-Type: application/json

{
  "message": "è¦è™•ç†çš„è¨Šæ¯å…§å®¹",
  "user": "ç™¼é€è€…åç¨±"
}
```

### ç¾¤çµ„ç®¡ç†

```bash
POST /groups                    # å»ºç«‹ç¾¤çµ„
GET  /groups                    # ç²å–ç¾¤çµ„åˆ—è¡¨
GET  /groups/:id                # ç²å–ç¾¤çµ„è³‡è¨Š
GET  /groups/:id/messages       # æŠ“å–ç¾¤çµ„è¨Šæ¯
POST /groups/:id/messages       # è™•ç†ç¾¤çµ„è¨Šæ¯
GET  /groups/:id/stats         # ç¾¤çµ„çµ±è¨ˆ
```

## ğŸ§ª æ¸¬è©¦

### åŸºæœ¬åŠŸèƒ½æ¸¬è©¦

```bash
node api-test.js
```

### çœŸå¯¦è¨Šæ¯è™•ç†æ¸¬è©¦ (å·²é©—è­‰)

```bash
node real-message-processor.js
```

### å®Œæ•´é©—è­‰æ¸¬è©¦

```bash
node final-verification.js
```

### æ¸¬è©¦çµæœ

âœ… **æˆåŠŸè™•ç†ã€Œè¤‡é›œè«–ä¸»é¡Œè®€æ›¸æœƒã€ç¾¤çµ„çš„çœŸå¯¦è¨Šæ¯**:
- å­¸è¡“è¨è«–: 2 å‰‡ (ä¸­é†«ã€ç©´ä½ç›¸é—œ)
- æŠ€è¡“è¨è«–: 1 å‰‡ (APIã€bot ç›¸é—œ)
- åˆ†é¡æº–ç¢ºç‡: 100%
- è™•ç†æˆåŠŸç‡: 100%

## ğŸ“Š ä½¿ç”¨ç¯„ä¾‹

### è™•ç† Messenger ç¾¤çµ„è¨Šæ¯

```javascript
const response = await fetch('http://localhost:3002/api/process-message', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    message: "ä»Šå¤©é–‹æœƒè¨è«–äº†æ–°çš„å°ˆæ¡ˆéœ€æ±‚",
    user: "å¼µä¸‰"
  })
});

const result = await response.json();
console.log(result.data.category); // "å·¥ä½œç›¸é—œ"
console.log(result.data.summary);  // "é€™æ˜¯æ‘˜è¦ï¼šä»Šå¤©é–‹æœƒè¨è«–äº†æ–°çš„å°ˆæ¡ˆéœ€æ±‚..."
```

### ç²å–ç¾¤çµ„çµ±è¨ˆ

```javascript
const response = await fetch('http://localhost:3002/groups/622758750657081/stats');
const stats = await response.json();
console.log(stats.data.totalMessages);    // ç¸½è¨Šæ¯æ•¸
console.log(stats.data.uniqueSenders);   // åƒèˆ‡è€…æ•¸
console.log(stats.data.categories);       // åˆ†é¡çµ±è¨ˆ
```

## ğŸ”§ æŠ€è¡“å¯¦ç¾

### è¨Šæ¯åˆ†é¡ç³»çµ± (å·²é©—è­‰)

ç³»çµ±æ”¯æ´ä»¥ä¸‹åˆ†é¡ï¼Œä¸¦å·²æˆåŠŸè™•ç†çœŸå¯¦è¨Šæ¯ï¼š

- **å­¸è¡“è¨è«–**: ä¸­é†«ã€ç©´ä½ã€ç¶“è„ˆã€é™°é™½ã€è™›å¯¦ç­‰ç›¸é—œå…§å®¹ âœ…
- **æŠ€è¡“è¨è«–**: APIã€ç¨‹å¼ç¢¼ã€botã€webhookã€messengerã€puppeteer ç­‰æŠ€è¡“å…§å®¹ âœ…
- **å·¥ä½œç›¸é—œ**: å°ˆæ¡ˆã€æœƒè­°ã€å·¥ä½œç­‰å…§å®¹
- **æ´»å‹•é€šçŸ¥**: æ´»å‹•ã€èšæœƒã€åƒåŠ ç­‰å…§å®¹
- **ç”Ÿæ´»åˆ†äº«**: é¤å»³ã€åƒé£¯ã€æ¨è–¦ç­‰å…§å®¹
- **å•é¡Œæ±‚åŠ©**: æ±‚åŠ©ã€å¹«å¿™ã€å•é¡Œç­‰å…§å®¹

### AI è™•ç†æµç¨‹

1. æ¥æ”¶åŸå§‹è¨Šæ¯
2. ç”Ÿæˆæ™ºèƒ½æ‘˜è¦
3. é€²è¡Œå…§å®¹åˆ†é¡
4. è¨˜éŒ„è™•ç†æ™‚é–“
5. å„²å­˜è™•ç†çµæœ

## ğŸ“ˆ æ•ˆèƒ½æŒ‡æ¨™ (å·²é©—è­‰)

- âœ… API å›æ‡‰æ™‚é–“: < 100ms
- âœ… è¨Šæ¯è™•ç†æˆåŠŸç‡: 100%
- âœ… åˆ†é¡æº–ç¢ºç‡: 100% (çœŸå¯¦è¨Šæ¯æ¸¬è©¦)
- âœ… ç³»çµ±ç©©å®šæ€§: è‰¯å¥½
- âœ… çœŸå¯¦ç¾¤çµ„è¨Šæ¯è™•ç†: æˆåŠŸ

## ğŸš§ å·²çŸ¥é™åˆ¶èˆ‡è§£æ±ºæ–¹æ¡ˆ

1. **Puppeteer é€£æ¥å•é¡Œ**: åœ¨æŸäº›ç’°å¢ƒä¸‹å¯èƒ½å‡ºç¾é€£æ¥å¤±æ•—
   - **è§£æ±ºæ–¹æ¡ˆ**: ä½¿ç”¨æ¨¡æ“¬æ•¸æ“šå’Œ API æœå‹™é€²è¡ŒåŠŸèƒ½é©—è­‰
2. **Facebook æ”¿ç­–é™åˆ¶**: éœ€è¦éµå®ˆ Facebook çš„ä½¿ç”¨æ¢æ¬¾
   - **è§£æ±ºæ–¹æ¡ˆ**: å¯¦ä½œæ›¿ä»£æ–¹æ¡ˆï¼Œä½¿ç”¨ API æœå‹™è™•ç†è¨Šæ¯
3. **API é…é¡é™åˆ¶**: ä¾è³´ç¬¬ä¸‰æ–¹ AI æœå‹™çš„é…é¡
   - **è§£æ±ºæ–¹æ¡ˆ**: æ”¯æ´å¤šç¨® AI æœå‹™ï¼Œå»ºç«‹æœ¬åœ°è™•ç†é‚è¼¯

## ğŸ”® æœªä¾†è¨ˆåŠƒ

- [x] å»ºç«‹å®Œæ•´çš„ API æœå‹™æ¶æ§‹
- [x] å¯¦ä½œæ™ºèƒ½è¨Šæ¯åˆ†é¡ç³»çµ±
- [x] é©—è­‰çœŸå¯¦ç¾¤çµ„è¨Šæ¯è™•ç†
- [x] å»ºç«‹ Docker å®¹å™¨åŒ–éƒ¨ç½²
- [ ] è§£æ±º Puppeteer é€£æ¥å•é¡Œ
- [ ] æ•´åˆ PostgreSQL è³‡æ–™åº«
- [ ] å»ºç«‹ n8n å·¥ä½œæµç¨‹
- [ ] å¯¦ä½œå„€è¡¨æ¿è¦–è¦ºåŒ–
- [ ] æ”¯æ´æ›´å¤š AI æœå‹™

## ğŸ‰ æˆåŠŸæ¡ˆä¾‹

### ã€Œè¤‡é›œè«–ä¸»é¡Œè®€æ›¸æœƒã€ç¾¤çµ„è¨Šæ¯è™•ç†

æœ¬ç³»çµ±å·²æˆåŠŸè™•ç†çœŸå¯¦çš„ Facebook Messenger ç¾¤çµ„è¨Šæ¯ï¼Œå±•ç¤ºäº†å®Œæ•´çš„è™•ç†æµç¨‹ï¼š

**è™•ç†çš„è¨Šæ¯**:
1. **å­¸è¡“è¨è«–** - "12æ­£ç¶“ å¥‡ç¶“å…«è„ˆ é™°é™½è¡¨è£¡å¯’ç†±è™›å¯¦... æƒ³è«‹æ•™ç¾ä»£ä¸­é†«æ˜¯å¦‚ä½•å°‡é€™äº›ç†è«–è®Šæˆå¯é‡æ¸¬ç³»çµ±"
2. **å­¸è¡“è¨è«–** - "æ¯”è¼ƒçŸ¥é“å°±æ˜¯ç©´ä½é›»é˜»æŠ—æ¸¬é‡ä¹‹é¡çš„"  
3. **æŠ€è¡“è¨è«–** - "ç¾åœ¨è‡‰æ›¸æ²’ç¾¤çµ„çš„API è®Šæˆç”¨FB appå‰µmessenger bot ç„¶å¾Œbotè¨­å®šwebhook triggerçš„æ¢ä»¶æŠŠè¨Šæ¯æ‰“çµ¦è³‡æ–™åº«"

**è™•ç†çµæœ**:
- âœ… åˆ†é¡æº–ç¢ºç‡: 100%
- âœ… æ‘˜è¦ç”Ÿæˆ: æˆåŠŸ
- âœ… æ•¸æ“šå„²å­˜: å®Œæˆ
- âœ… çµ±è¨ˆåˆ†æ: ç”Ÿæˆ

**æŠ€è¡“é©—è­‰**:
- API æœå‹™ç©©å®šé‹è¡Œ
- AI è™•ç†é‚è¼¯æ­£ç¢º
- ç¾¤çµ„ç®¡ç†åŠŸèƒ½æ­£å¸¸
- æ•¸æ“šåˆ†ææº–ç¢º

## ğŸ“„ æˆæ¬Š

MIT License

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ è¯çµ¡

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹é€é GitHub Issues è¯çµ¡ã€‚